<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Consultation — IoT Health Monitoring</title>
  <style>
    body{font-family:Inter, system-ui, Arial;background:#f4f8fb;margin:0;color:#052934}
    header{padding:12px 20px;background:linear-gradient(90deg,#0b7dd1,#055278);color:#fff}
    .container{max-width:900px;margin:18px auto;padding:16px}
    .card{background:#fff;padding:16px;border-radius:12px;box-shadow:0 8px 26px rgba(10,20,40,0.06)}
    .chat{height:360px;overflow:auto;padding:12px;border-radius:8px;background:#f7fbfe}
    .msg{margin:8px 0;display:flex;gap:8px;align-items:flex-start}
    .msg.you{flex-direction:row-reverse}
    .bubble{padding:10px 12px;border-radius:10px;max-width:80%}
    .bubble.you{background:#0b7dd1;color:#fff}
    .bubble.them{background:#eef2f6;color:#052934}
    .controls{display:flex;gap:8px;margin-top:10px}
    .input{flex:1;padding:10px;border-radius:8px;border:1px solid #d7e7f2}
    .btn{background:#0b7dd1;color:#fff;padding:10px 12px;border-radius:8px}
    .small{font-size:13px;color:#6b7280;margin-top:8px}
  </style>
</head>
<body>
  <header><strong>Online Consultation</strong></header>
  <main class="container">
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3 id="consTitle">Consultation with Patient</h3>
          <div class="small">Simulated chat for demonstration</div>
        </div>
        <div>
          <a href="dashboard.html" style="text-decoration:none" class="btn">Back to Dashboard</a>
        </div>
      </div>

      <div id="chat" class="chat" aria-live="polite"></div>

      <div class="controls">
        <input id="chatInput" class="input" placeholder="Type message (e.g., 'Are you okay?')">
        <button id="sendBtn" class="btn">Send</button>
      </div>

      <div class="small">Pro tip: Add actual telehealth integration (Google Meet or Zoom) for live video consultations.</div>
    </div>
  </main>

<script>
const chat = document.getElementById('chat');
const input = document.getElementById('chatInput');

function addMessage(text, who='them'){
  const row = document.createElement('div');
  row.className = 'msg ' + (who==='you' ? 'you' : '');
  const bubble = document.createElement('div');
  bubble.className = 'bubble ' + (who==='you' ? 'you' : 'them');
  bubble.innerText = text;
  row.appendChild(bubble);
  chat.appendChild(row);
  chat.scrollTop = chat.scrollHeight;
}

document.getElementById('sendBtn').addEventListener('click', ()=>{
  const txt = input.value.trim();
  if(!txt) return;
  addMessage(txt,'you');
  input.value='';
  // simulated reply
  setTimeout(()=> {
    const reply = generateReply(txt);
    addMessage(reply,'them');
  }, 900 + Math.random()*900);
});

function generateReply(userMsg){
  const lower = userMsg.toLowerCase();
  if(lower.includes('pain') || lower.includes('hurt')) return "I'm sorry to hear that. Please rest and monitor your vitals. If BPM > 120, seek immediate help.";
  if(lower.includes('ok') || lower.includes('fine')) return "Glad to hear. Keep monitoring and stay hydrated.";
  if(lower.includes('temperature') || lower.includes('fever')) return "If temperature is above 38°C, consider taking paracetamol and consult a doctor.";
  return "Thanks for the update. Please describe any symptoms and I will advise.";
}

/* Welcome messages */
addMessage("Hello — I'm Dr. Mokoa. How can I help today?", 'them');
addMessage("Hi Doctor, my BPM seems high.", 'you');
setTimeout(()=> addMessage("Please sit down, breathe slowly and let me check your recent readings on the dashboard.", 'them'), 900);
</script>
</body>
</html>
