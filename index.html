<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IoT Health Monitor 2.0</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
  body { background:#f4f7ff; color:#333; }
  header {
    background: linear-gradient(90deg,#0a74ff,#00d4ff);
    color:white; padding:20px 40px;
    display:flex; justify-content:space-between; align-items:center;
    position:sticky; top:0; z-index:100;
  }
  header h1 { font-size:1.9rem; font-weight:600; }
  nav a { color:white; margin-left:20px; text-decoration:none; font-weight:500; transition:0.3s; }
  nav a:hover { color:#f1f1f1; text-decoration:underline; }

  /* Hero Section */
  .hero {
    height:100vh;
    background: url('https://img.freepik.com/free-photo/finger-pressing-virtual-heart-see-graph-white-background_953771-19.jpg') center/cover no-repeat;
    background-size:cover;
    display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center;
    color:white; position:relative;
    background-attachment: fixed;
  }
  .hero::after {
    content:""; position:absolute; top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.45); z-index:1;
  }
  .hero > * { position:relative; z-index:2; }
  .hero h2 { font-size:3rem; margin-bottom:20px; text-shadow:2px2px4px rgba(0,0,0,0.4);}
  .hero p { font-size:1.2rem; max-width:650px; line-height:1.5; }
  .btn-primary {
    margin-top:20px; background-color:#00d4ff; color:white; border:none;
    padding:12px 30px; border-radius:30px; font-weight:600; cursor:pointer; transition:0.3s;
  }
  .btn-primary:hover { background:#0a74ff; }

  /* Section Styling */
  .section { padding:70px 50px; text-align:center; }
  .section h3 { font-size:2.2rem; margin-bottom:50px; color:#0a74ff; }
  .cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:25px; justify-content:center; }
  .card { background:white; border-radius:20px; box-shadow:0 10px 25px rgba(0,0,0,0.1); padding:30px; transition:0.3s; }
  .card:hover { transform: translateY(-10px); }

  #dashboard { background:#e8f2ff; border-top:5px solid #0a74ff; border-bottom:5px solid #0a74ff; border-radius:25px; padding:50px 40px; }

  canvas { width:100% !important; height:350px !important; }

  .footer { background:#0a1833; color:#ddd; text-align:center; padding:40px; }
  .footer p { font-size:0.95rem; }
  .highlight { color:#00d4ff; font-weight:bold; }

  img.responsive { width:80%; max-width:600px; border-radius:20px; margin-top:30px; transition:0.3s; }
  img.responsive:hover { transform: scale(1.05); }

  @media(max-width:768px){ header{flex-direction:column;text-align:center;} nav{margin-top:10px;} }
</style>
</head>
<body>

<header>
  <h1>IoT Health Monitor 2.0</h1>
  <nav>
    <a href="#home">Home</a>
    <a href="#dashboard">Dashboard</a>
    <a href="#doctor">AI Doctor</a>
    <a href="#gym">Gym Monitor</a>
    <a href="#tips">Health Tips</a>
    <a href="#about">About</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<!-- Hero -->
<section id="home" class="hero">
  <h2>Monitor Your Health Anytime, Anywhere</h2>
  <p>Real-time heart rate, temperature, and humidity tracking using IoT sensors and ThingSpeak analytics.</p>
  <button class="btn-primary" onclick="document.getElementById('dashboard').scrollIntoView({behavior:'smooth'})">View Dashboard</button>
</section>

<!-- Dashboard -->
<section id="dashboard" class="section">
  <h3>üìä Live Health Dashboard</h3>
  <div class="cards">
    <div class="card">
      <h4>‚ù§Ô∏è Heart Rate (BPM)</h4>
      <p id="bpmValue">--</p>
    </div>
    <div class="card">
      <h4>üå°Ô∏è Temperature (¬∞C)</h4>
      <p id="tempValue">--</p>
    </div>
    <div class="card">
      <h4>üíß Humidity (%)</h4>
      <p id="humValue">--</p>
    </div>
  </div>
  <canvas id="dataChart"></canvas>
  <button class="btn-primary" onclick="downloadCSV()">Download Data</button>
</section>

<!-- AI Doctor -->
<section id="doctor" class="section" style="background:#f0f7ff;">
  <h3>ü§ñ AI Doctor Assistant</h3>
  <p>Get instant insights and guidance from AI-powered doctor assistant using real-time sensor data.</p>
  <img src="https://img.freepik.com/free-photo/futuristic-virtual-doctor-hologram_1150-19803.jpg" class="responsive">
</section>

<!-- Gym Section -->
<section id="gym" class="section">
  <h3>üèãÔ∏è‚Äç‚ôÄÔ∏è Gym & Fitness Monitoring</h3>
  <p>Track workouts and heart rate to optimize fitness training and ensure safety using IoT wearable sensors.</p>
  <img src="https://img.freepik.com/free-photo/man-using-smartwatch-gym_1157-39526.jpg" class="responsive">
</section>

<!-- Health Tips -->
<section id="tips" class="section" style="background:#e8f2ff;">
  <h3>üí° Health Insights & Tips</h3>
  <div class="cards">
    <div class="card">Hydrate regularly and maintain optimal humidity for body performance.</div>
    <div class="card">Monitor BPM daily ‚Äî abnormal resting heart rates may require attention.</div>
    <div class="card">Use IoT sensors to track fitness progress over time.</div>
  </div>
</section>

<!-- About -->
<section id="about" class="section">
  <h3>‚ÑπÔ∏è About IoT Health Monitor</h3>
  <p>The <span class="highlight">IoT Health Monitoring System</span> uses Arduino and NodeMCU to collect real-time data and visualize it via ThingSpeak. Ideal for patients, gyms, and medical professionals.</p>
</section>

<!-- Contact -->
<section id="contact" class="section" style="background:#f0f7ff;">
  <h3>üìû Contact Us</h3>
  <p>Email: <span class="highlight">thapelomokoa.projects@gmail.com</span></p>
</section>

<div class="footer">
  <p>Developed by <strong>Thapelo Mokoa</strong> ‚Äî IoT Health Monitoring System ¬© 2025</p>
</div>

<script>
const channelID = "3128115"; 
const apiKey = "K72OYJMYOJZN240T"; 

async function fetchData() {
  const url = `https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${apiKey}&results=20`;
  const response = await fetch(url);
  const data = await response.json();
  const feeds = data.feeds;

  if(feeds.length > 0){
    const latest = feeds[feeds.length - 1];
    document.getElementById('bpmValue').innerText = latest.field1 || "--";
    document.getElementById('tempValue').innerText = latest.field2 || "--";
    document.getElementById('humValue').innerText = latest.field3 || "--";

    const labels = feeds.map(f=>new Date(f.created_at).toLocaleTimeString());
    const bpm = feeds.map(f=>f.field1);
    const temp = feeds.map(f=>f.field2);
    const hum = feeds.map(f=>f.field3);

    drawChart(labels,bpm,temp,hum);
  }
}

function drawChart(labels,bpm,temp,hum){
  const ctx = document.getElementById('dataChart').getContext('2d');
  new Chart(ctx,{
    type:'line',
    data:{
      labels,
      datasets:[
        {label:'BPM', data:bpm, borderColor:'red', fill:false},
        {label:'Temp (¬∞C)', data:temp, borderColor:'blue', fill:false},
        {label:'Humidity (%)', data:hum, borderColor:'green', fill:false}
      ]
    },
    options:{ responsive:true, plugins:{ legend:{ position:'bottom' } } }
  });
}

// Download CSV
function downloadCSV(){
  fetch(`https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${apiKey}&results=50`)
  .then(res=>res.json())
  .then(data=>{
    const feeds = data.feeds;
    let csv = "Date,BPM,Temperature,Humidity\n";
    feeds.forEach(f=>{
      csv += `${f.created_at},${f.field1},${f.field2},${f.field3}\n`;
    });
    const blob = new Blob([csv], {type:'text/csv'});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = "health_data.csv";
    link.click();
  });
}

setInterval(fetchData,15000);
fetchData();
</script>

</body>
</html>
