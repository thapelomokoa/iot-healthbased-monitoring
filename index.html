<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IoT Health Monitoring System</title>
<style>
body { margin:0; font-family:'Arial',sans-serif; background:#f8f9fa; color:#333; scroll-behavior:smooth; }
.navbar { position:fixed; top:0; width:100%; background:#4facfe; display:flex; justify-content:center; gap:20px; padding:10px; z-index:100; }
.navbar a { color:#fff; text-decoration:none; font-weight:bold; cursor:pointer; }
.section { display:none; padding:120px 20px 40px; min-height:80vh; }
.section.active { display:block; }
.hero { background:linear-gradient(90deg,#4facfe,#00f2fe); color:#fff; text-align:center; padding:140px 20px 80px; }
.hero h1 { font-size:3em; margin-bottom:10px; }
.hero p { font-size:1.2em; margin-bottom:20px; }
.btn { padding:10px 20px; margin:5px; border-radius:8px; border:none; cursor:pointer; color:#fff; background:#007bff; text-decoration:none; display:inline-block; }
.widgets { display:flex; flex-wrap:wrap; gap:20px; margin-bottom:20px; justify-content:center; }
.widget { flex:1 1 150px; background:#e9f5ff; padding:20px; border-radius:12px; text-align:center; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.heartbeat { font-size:2em; animation:beat 1s infinite alternate; }
@keyframes beat { 0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);} }
.alert { color:red; font-weight:bold; animation:flash 1s infinite alternate; }
@keyframes flash {0%,100%{opacity:1;}50%{opacity:0.4;}}
canvas { width:100% !important; max-width:100%; height:300px !important; }
table { width:100%; border-collapse:collapse; margin-top:20px; }
table th, table td { border:1px solid #ccc; padding:10px; text-align:center; }
table th { background:#4facfe; color:#fff; }
input, textarea { padding:10px; width:100%; margin:5px 0; border-radius:6px; border:1px solid #ccc; }
form { max-width:500px; margin:auto; }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<nav class="navbar">
  <a onclick="showSection('hero')">Home</a>
  <a onclick="showSection('patient')">Patient</a>
  <a onclick="showSection('doctor')">Doctor</a>
  <a onclick="showSection('gym')">Gym</a>
  <a onclick="showSection('about')">About Us</a>
  <a onclick="showSection('contact')">Contact</a>
</nav>

<!-- Hero Section -->
<section id="hero" class="hero section active">
  <h1>Monitor Your Health Anywhere</h1>
  <p>Real-Time ‚ù§Ô∏è BPM, üå°Ô∏è Temperature & üíß Humidity</p>
  <a class="btn" onclick="showSection('patient')">View Dashboard</a>
  <a class="btn" onclick="showSection('doctor')">Book Consultation</a>
</section>

<!-- Patient Section -->
<section id="patient" class="section">
  <h2>Patient Dashboard</h2>
  <div class="widgets">
    <div class="widget heartbeat">‚ù§Ô∏è <span id="bpmValue">--</span></div>
    <div class="widget">üå°Ô∏è Temp: <span id="tempValue">--</span> ¬∞C</div>
    <div class="widget">üíß Humidity: <span id="humValue">--</span> %</div>
    <div class="widget">Health Score: <span id="healthScore">--</span></div>
  </div>
  <canvas id="combinedChart"></canvas>
  <h3>AI Health Tips ü§ñ</h3>
  <ul id="aiTips">
    <li>Loading AI insights...</li>
  </ul>
</section>

<!-- Doctor Section -->
<section id="doctor" class="section">
  <h2>Doctor Portal</h2>
  <p>View patient data and schedule online consultations via Teams.</p>
  <table id="doctorTable">
    <thead><tr><th>Patient</th><th>BPM</th><th>Temp</th><th>Humidity</th><th>Status</th><th>Consult</th></tr></thead>
    <tbody>
      <tr>
        <td>Demo Patient</td>
        <td id="docBpm">--</td>
        <td id="docTemp">--</td>
        <td id="docHum">--</td>
        <td id="docStatus">--</td>
        <td><a href="https://teams.microsoft.com/l/meetup-join/123456789" target="_blank">Join Teams</a></td>
      </tr>
    </tbody>
  </table>
</section>

<!-- Gym Section -->
<section id="gym" class="section">
  <h2>Gym Dashboard</h2>
  <p>The IoT Health Monitoring System allows gyms to monitor multiple members in real-time. Track heart rate zones, detect overexertion, and optimize workouts. Alerts notify trainers of abnormal readings. Gamified leaderboards motivate members to maintain healthy streaks.</p>
</section>

<!-- About Us -->
<section id="about" class="section">
  <h2>About IoT Health Monitoring</h2>
  <p>This system combines IoT sensors (pulse, temperature, humidity) with Arduino and ESP8266 to provide live health monitoring. Doctors and gyms can track users remotely. AI insights predict health trends and provide personalized tips. Alerts prevent emergencies by notifying abnormal readings in real-time.</p>
</section>

<!-- Contact Us -->
<section id="contact" class="section">
  <h2>Contact Us</h2>
  <form onsubmit="alert('Message sent!'); return false;">
    <input type="text" placeholder="Your Name" required>
    <input type="email" placeholder="Your Email" required>
    <textarea placeholder="Your Message" rows="5" required></textarea>
    <button class="btn" type="submit">Send Message</button>
  </form>
</section>

<script>
// Section navigation
function showSection(id){
  document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// ThingSpeak data
const CHANNEL_ID='3128115';
const READ_KEY='K72OYJMYOJZN240T';
let bpmData=[], tempData=[], humData=[];

// Chart.js setup
const ctx = document.getElementById('combinedChart').getContext('2d');
const combinedChart = new Chart(ctx, {
  type: 'line',
  data: { labels: [], datasets: [
    { label:'BPM ‚ù§Ô∏è', data:[], borderColor:'red', fill:false },
    { label:'Temperature üå°Ô∏è', data:[], borderColor:'orange', fill:false },
    { label:'Humidity üíß', data:[], borderColor:'blue', fill:false }
  ]},
  options: {
    responsive:true,
    interaction:{mode:'index', intersect:false},
    plugins:{legend:{display:true}},
    scales:{y:{beginAtZero:true}}
  }
});

// Fetch ThingSpeak data
async function fetchThingSpeak(){
  try{
    const res = await fetch(`https://api.thingspeak.com/channels/${CHANNEL_ID}/feeds.json?api_key=${READ_KEY}&results=20`);
    const data = await res.json();
    bpmData = data.feeds.map(f=>parseInt(f.field1)||0);
    tempData = data.feeds.map(f=>parseFloat(f.field2)||0);
    humData = data.feeds.map(f=>parseFloat(f.field3)||0);
    updateDashboard();
    updateAIInsights();
  }catch(e){console.error(e);}
}

// Update patient and doctor dashboards
function updateDashboard(){
  const bpm = bpmData[bpmData.length-1] || 0;
  const temp = tempData[tempData.length-1] || 0;
  const hum = humData[humData.length-1] || 0;

  document.getElementById('bpmValue').textContent = bpm;
  document.getElementById('tempValue').textContent = temp;
  document.getElementById('humValue').textContent = hum;

  const healthScore = Math.round((bpm/120 + temp/40 + hum/100)/3*100);
  document.getElementById('healthScore').textContent = isNaN(healthScore)? '--' : healthScore;

  document.getElementById('docBpm').textContent = bpm;
  document.getElementById('docTemp').textContent = temp;
  document.getElementById('docHum').textContent = hum;
  let status='üü¢';
  if(bpm>100 || temp>38 || hum>70) status='üî¥';
  else if(bpm<60 || temp<36) status='üü°';
  document.getElementById('docStatus').textContent = status;

  combinedChart.data.labels = bpmData.map((_,i)=>i+1);
  combinedChart.data.datasets[0].data = bpmData;
  combinedChart.data.datasets[1].data = tempData;
  combinedChart.data.datasets[2].data = humData;
  combinedChart.update();
}

// AI insights (basic simulation)
function updateAIInsights(){
  const tips = [];
  const bpm = bpmData[bpmData.length-1] || 0;
  const temp = tempData[tempData.length-1] || 0;
  const hum = humData[humData.length-1] || 0;
  if(bpm>100) tips.push("Your heart rate is high ‚ù§Ô∏è. Consider resting.");
  if(bpm<60) tips.push("Your heart rate is low ‚ù§Ô∏è. Light activity recommended.");
  if(temp>37.5) tips.push("You may have a fever üå°Ô∏è. Monitor closely.");
  if(hum>70) tips.push("High humidity üíß detected. Stay hydrated.");
  if(tips.length===0) tips.push("All readings are normal. Keep up the good work!");
  const ul = document.getElementById('aiTips');
  ul.innerHTML = tips.map(t=>`<li>${t}</li>`).join('');
}

// Initial fetch and auto-refresh
fetchThingSpeak();
setInterval(fetchThingSpeak,15000);
</script>

</body>
</html>
