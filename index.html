<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IoT Health Monitor</title>
<style>
body { margin:0; font-family:'Arial',sans-serif; background:#f8f9fa; color:#333; scroll-behavior:smooth; }
.navbar { position:fixed; top:0; width:100%; background:#4facfe; display:flex; justify-content:center; gap:20px; padding:10px; z-index:100; }
.navbar a { color:#fff; text-decoration:none; font-weight:bold; }
.section { padding:100px 20px 40px; }
.hero { background:linear-gradient(90deg,#4facfe,#00f2fe); color:#fff; text-align:center; padding:140px 20px 80px; position:relative; }
.hero h1 { font-size:3em; margin-bottom:10px; }
.hero p { font-size:1.2em; margin-bottom:20px; }
.btn { padding:10px 20px; margin:5px; border-radius:8px; border:none; cursor:pointer; color:#fff; background:#007bff; text-decoration:none; display:inline-block; }
.widgets { display:flex; flex-wrap:wrap; gap:20px; margin-bottom:20px; justify-content:center; }
.widget { flex:1 1 150px; background:#e9f5ff; padding:20px; border-radius:12px; text-align:center; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.heartbeat { font-size:2em; animation:beat 1s infinite alternate; }
@keyframes beat { 0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);} }
.alert { color:red; font-weight:bold; animation:flash 1s infinite alternate; }
@keyframes flash {0%,100%{opacity:1;}50%{opacity:0.4;}}
canvas { width:100% !important; max-width:100%; height:300px !important; }
table { width:100%; border-collapse:collapse; margin-top:20px; }
table th, table td { border:1px solid #ccc; padding:10px; text-align:center; }
table th { background:#4facfe; color:#fff; }
form input, form textarea { width:100%; padding:10px; margin:5px 0; border-radius:5px; border:1px solid #ccc; }
form button { padding:10px 20px; border:none; background:#4facfe; color:#fff; border-radius:5px; cursor:pointer; }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<nav class="navbar">
  <a href="#hero">Home</a>
  <a href="#dashboard">Patient</a>
  <a href="#consultation">Online Consultation</a>
  <a href="#doctor">Doctor Portal</a>
  <a href="#gym">Gym</a>
  <a href="#about">About Us</a>
  <a href="#contact">Contact</a>
</nav>

<section id="hero" class="hero">
  <h1>Monitor Your Health Anywhere</h1>
  <p>Real-Time ‚ù§Ô∏è BPM, üå°Ô∏è Temperature & üíß Humidity</p>
  <a class="btn" href="#dashboard">View Dashboard</a>
  <a class="btn" href="#consultation">Book Consultation</a>
</section>

<!-- Patient Dashboard -->
<section id="dashboard" class="section">
  <h2>Patient Dashboard</h2>
  <div class="widgets">
    <div class="widget heartbeat">‚ù§Ô∏è <span id="bpmValue">--</span></div>
    <div class="widget">üå°Ô∏è Temp: <span id="tempValue">--</span> ¬∞C</div>
    <div class="widget">üíß Humidity: <span id="humValue">--</span> %</div>
    <div class="widget">Health Score: <span id="healthScore">--</span></div>
  </div>
  <canvas id="combinedChart"></canvas>
</section>

<!-- Online Consultation Section (Swapped above Doctor Portal) -->
<section id="consultation" class="section">
  <h2>Online Consultation</h2>
  <p>Schedule a virtual meeting with your doctor through Microsoft Teams. Receive AI-driven health suggestions and alerts before your consultation.</p>
  <a class="btn" href="https://teams.microsoft.com/l/meetup-join/19%3ameeting_example" target="_blank">Join Consultation</a>
</section>

<!-- Doctor Portal -->
<section id="doctor" class="section">
  <h2>Doctor Portal</h2>
  <table id="doctorTable">
    <thead><tr><th>Patient</th><th>BPM</th><th>Temp</th><th>Humidity</th><th>Status</th><th>Consult</th></tr></thead>
    <tbody>
      <tr>
        <td>Demo Patient</td>
        <td id="docBpm">--</td>
        <td id="docTemp">--</td>
        <td id="docHum">--</td>
        <td id="docStatus">--</td>
        <td><a href="https://teams.microsoft.com/l/meetup-join/19%3ameeting_example" target="_blank">Join</a></td>
      </tr>
    </tbody>
  </table>
</section>

<!-- Gym Dashboard -->
<section id="gym" class="section">
  <h2>Gym Dashboard</h2>
  <p>
    Our Gym Dashboard is designed to help trainers and fitness enthusiasts monitor the health and performance of multiple members in real-time. Using IoT health monitoring technology, gyms can track heart rate, body temperature, and humidity levels of each member during workouts, ensuring safety and optimizing training intensity. The dashboard provides visual insights through charts and alerts, allowing trainers to immediately identify any abnormal readings or health risks. With AI-powered suggestions, trainers receive guidance on how to adjust exercise routines for optimal results. Members can earn badges for maintaining healthy readings over time, promoting consistency and motivation. The leaderboard feature allows gyms to encourage friendly competition, tracking progress and highlighting top-performing members. This integration of technology, gamification, and data-driven insights enables gyms to offer a modern, safe, and engaging training experience while ensuring each member‚Äôs well-being.
  </p>

  <div class="widgets" id="gymWidgets">
    <div class="widget">Member 1: ‚ù§Ô∏è <span id="member1Bpm">--</span></div>
    <div class="widget">Member 2: ‚ù§Ô∏è <span id="member2Bpm">--</span></div>
    <div class="widget">Member 3: ‚ù§Ô∏è <span id="member3Bpm">--</span></div>
  </div>

  <div style="margin-top:20px; text-align:center;">
    <h3>Gym Leaderboard</h3>
    <div id="gymLeaderboard"></div>
  </div>

  <div style="margin-top:20px; text-align:center;">
    <h3>Member Badges</h3>
    <div id="gymBadges"></div>
  </div>
</section>

<!-- About Us -->
<section id="about" class="section">
  <h2>About Us</h2>
  <p>
    IoT Health Monitoring System integrates Arduino, ESP8266, DHT22, Pulse Sensors, and ThingSpeak to provide real-time health tracking. Our mission is to make monitoring accessible at homes, gyms, and clinics while using AI-driven insights to maintain optimal health.
  </p>
</section>

<!-- Contact Us -->
<section id="contact" class="section">
  <h2>Contact Us</h2>
  <form>
    <input type="text" placeholder="Name" required>
    <input type="email" placeholder="Email" required>
    <textarea placeholder="Message" required></textarea>
    <button type="submit">Send Message</button>
  </form>
</section>

<script>
const CHANNEL_ID='3128115';
const READ_KEY='K72OYJMYOJZN240T';
let bpmData=[], tempData=[], humData=[];

// Chart.js setup
const ctx = document.getElementById('combinedChart').getContext('2d');
const combinedChart = new Chart(ctx, {
  type: 'line',
  data: { labels: [], datasets: [
    { label:'BPM ‚ù§Ô∏è', data:[], borderColor:'red', fill:false },
    { label:'Temperature üå°Ô∏è', data:[], borderColor:'orange', fill:false },
    { label:'Humidity üíß', data:[], borderColor:'blue', fill:false }
  ]},
  options: {
    responsive:true,
    interaction:{mode:'index', intersect:false},
    plugins:{legend:{display:true}},
    scales:{y:{beginAtZero:true}}
  }
});

// ThingSpeak Fetch
async function fetchThingSpeak(){
  try{
    const res = await fetch(`https://api.thingspeak.com/channels/${CHANNEL_ID}/feeds.json?api_key=${READ_KEY}&results=20`);
    const data = await res.json();
    bpmData = data.feeds.map(f=>parseInt(f.field1)||0);
    tempData = data.feeds.map(f=>parseFloat(f.field2)||0);
    humData = data.feeds.map(f=>parseFloat(f.field3)||0);
    updateDashboard();
  }catch(e){console.error(e);}
}

// Update Patient & Doctor Dashboard
function updateDashboard(){
  const bpm = bpmData[bpmData.length-1] || 0;
  const temp = tempData[tempData.length-1] || 0;
  const hum = humData[humData.length-1] || 0;

  document.getElementById('bpmValue').textContent = bpm;
  document.getElementById('tempValue').textContent = temp;
  document.getElementById('humValue').textContent = hum;

  const healthScore = Math.round((bpm/120 + temp/40 + hum/100)/3*100);
  document.getElementById('healthScore').textContent = isNaN(healthScore)? '--' : healthScore;

  document.getElementById('docBpm').textContent = bpm;
  document.getElementById('docTemp').textContent = temp;
  document.getElementById('docHum').textContent = hum;
  let status='üü¢';
  if(bpm>100 || temp>38 || hum>70) status='üî¥';
  else if(bpm<60 || temp<36) status='üü°';
  document.getElementById('docStatus').textContent = status;

  combinedChart.data.labels = bpmData.map((_,i)=>i+1);
  combinedChart.data.datasets[0].data = bpmData;
  combinedChart.data.datasets[1].data = tempData;
  combinedChart.data.datasets[2].data = humData;
  combinedChart.update();
}

// Gym Dashboard Example
let memberData = [
  {name: 'Member 1', bpm: 75, streak: 0},
  {name: 'Member 2', bpm: 88, streak: 0},
  {name: 'Member 3', bpm: 95, streak: 0}
];

function updateGymDashboard() {
  memberData.forEach((member, index) => {
    document.getElementById(`member${index+1}Bpm`).textContent = member.bpm;
    if(member.bpm >= 60 && member.bpm <= 100) member.streak++;
    else member.streak = 0;
  });
  const leaderboardDiv = document.getElementById('gymLeaderboard');
  leaderboardDiv.innerHTML = '';
  memberData.sort((a,b) => b.streak - a.streak);
  memberData.forEach(member => {
    const div = document.createElement('div');
    div.textContent = `${member.name} - Streak: ${member.streak}`;
    leaderboardDiv.appendChild(div);
  });
  const badgesDiv = document.getElementById('gymBadges');
  badgesDiv.innerHTML = '';
  memberData.forEach(member => {
    if(member.streak >= 5){
      const badge = document.createElement('div');
      badge.style.display = 'inline-block';
      badge.style.background = '#4caf50';
      badge.style.color = '#fff';
      badge.style.padding = '5px 10px';
      badge.style.margin = '5px';
      badge.style.borderRadius = '5px';
      badge.textContent = `üèÖ ${member.name} - Consistent Performer`;
      badgesDiv.appendChild(badge);
    }
  });
}

// Initial Fetches
fetchThingSpeak();
setInterval(fetchThingSpeak,15000);
setInterval(updateGymDashboard,15000);
updateGymDashboard();
</script>

</body>
</html>
